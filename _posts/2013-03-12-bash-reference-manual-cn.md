---
layout: post
title: "Bash Reference Manual cn"
description: ""
category: 
tags: []
---
{% include JB/setup %}
##bash 功能.
本文简要的描述了bash shell的简单功能.(版本4.2,2010年10月28日 )
本文的版本号是4.2,最后更新于2010年10月28日. 是GNU Bash的参考手册.

Bash不仅又许多常见的shell的功能,并且有许多独有的功能.bash像这些shell借鉴了许多概念,例如: Bourne Shell(sh), Korn Shell(ksh), C-Shell(csh).紧接着的菜单在分类上并没有按照从其他shell中借鉴的概念来分类.

本手册旨在简单介绍Bash的一些简单功能. 这份手册应当作为决定shell行为的参考手册.


- 介绍                                shell的简单介绍         
- 定义                                一些用于本手册的概念.
- 基本shell功能                       构成shell的方方面面.
- shell内建命令                       shell内建的命令
- shell变量                           Bash用到的变量
- Bash功能                            只在Bash中用有的功能
- 任务控制                            任务控制的简单介绍和用法.
- 命令行编辑                          介绍命令行编辑的功能.
- 交互的使用历史命令                  history命令的一些用法展开.
- 安装Bash                            如何编译安装Bash
- 报告缺陷                            如何回报Bash的bug.
- Bash与Bourne Shell的主要区别        bash和Bourne Shell的区别列表 
- GNU免费文档协议                     复制并分享这份文档.
- 索引                                文档的索引


##1.介绍  
[什么是Bash?]()          Bash的简短介绍.  
[什么是Shell?]()         shells的简要介绍.  
###1.1 什么是Bash?
Bash是GNU操作系统的一个shell程序或命令行解释器.它的名字来源于"Bourne_Again SHell"的首字母缩写.是Stephen Bourne的双关语,作者直接采用了当前Unix shell的sh,出现在第七版贝尔实验室研究版本的Unix.

Bash恩大程度上能和sh兼容.并且从Korn shell 和C shell当中学到了一些有用的功能.它的目的就是为了实现一个符合IEEE POSIX规范的shell,并且成为了IEEE POSIX规范的一部分.它在交互性和编程方面提供了功能上的提高.

虽然GNU操作系统提供了其他的shell,例如csh,但是Bash是默认的shell.跟其他Gnu软件一样,Bash非常便于移植.目前可以运行在几乎所有版本的Unix系统和一些其他的操作系统.还有一些独立移植的版本支持MS-DOS,OS/2,Windows. 

###1.2 shell是什么?


##2. 定义
这些定义在整个剩下的手册中被用到.
#### POSIX
#### blank
builtin
control operator
exit status 
field
filename 
job
job control
metacharacter
name
operator
process group
process group ID
return status 
signal
special builtin
token
word

##3.基本shell功能
Bash是"Bourne-Again SHell"的缩写.Bourne Shell是传统Unix系统上默认的shell,是由Stephen Bourne编写的.Bourne shell中所有的内建命令在Bash当中都是可用的.这些引用和求值的规则是遵守POSIX协议并且成为了标准版的Unix shell程序.

这个章节将单总结了shell中的方方面面,命令,控制结构,shell函数,shell参数,重定向,一种将输入和输出定向到一个命名文件中的方法,还包括shell命令是如何执行的.

- shell语法
- shell命令
- shell函数
- shell参数
- shell拓展
- 重定向
- 执行命令
- shell脚本

###3.1 shell语法
- [shell操作]
- [引用]
- [注释]

当shell从输入中读取数据时,shell是按照如下顺序来处理输入.如果输入该行被注释,shell会忽略这个注释符号("#"),并且忽略这一行.

然后,简单的讲,shell读取输入,并且讲输入分为单词和操作符.按照引用的规则来选择一些特殊符号的意思.

shell将这些符号转化成为命令和其他的结构,移除特定单词的特定含义.如果需要的话,重定向输入输出流.执行特定的命令,等待命令的退出状态,让退出状态可用,以便后面的操作对其进行检验和一些特殊的处理.

####3.1.1 shell操作
以下内容简洁的描述了当shell读取和执行一个命令时的操作.基本上,shell按照如下的顺序进行操作.
1. 使用-c参数从文件中读取输入,或者直接从用户的终端读取输入.
2. 将输入转化成为单词和操作符.按照在引用那一章节所描述的规则.这些语法符号使用元字符隔开.Alias展开就是在这个阶段进行的.
3. 将语法符号转化成为简单的复合命令.
4. 执行shell展开,将可展开的符号展开成了文件名列表,命令和参数.
5. 执行必要的重定向,从操作符中移除重定向命令.
6. 执行命令.
7. 等待命令执行完毕,并收集退出状态.

####3.1.2 引用
- [转义字符]
- [单引号]
- [双引号]
- [ANSI-C引用]
- [本地化]
转义是用来移除特定字符或者单词的含义.引用可以防止一些特殊的单词被处理.以便于你使用保留字.

每个元字符都有自己的特定含义,如果你想使用它本身的含义,可以使用引用.当你使用"!"的时候,必须引用它,防止它被当作历史展开符号使用.详情可以操作历史命令那个章节.

有三种引用机制,转义字符,单引号,双引号.

####3.1.2.1转义字符
没有被引用的反斜杠是转义字符,它防止紧跟着它的字符被转义.当你使用\newline时,bash会继续这一行.
####3.1.2.2单引号引用
使用单引号引用的内容,每个字符保持了字面值.单引号之内不能出现单引号,即时被反斜杠转义的时候.
####3.1.2.3 双引号
被双引号引用的值保留了本身的字面值.除了'$',"'",'\','!' 这些符号."$"和"'"符号在双引号中保留了他们的特殊含义.反斜杠"\"保留了本身的特殊含义,仅当反斜杠后面跟的是"$", "'",'"',"\"这些符号或者换行符.双引号内可以有被反斜杠转义的双引号.
而这两个"@","*"特殊的参数在双引号中依然保持了他们的特有含义.
####3.1.2.4 ANSI-C 引用

####3.1.2.5 本地化

###3.1.3 注释
在非交互性shell中,"#"注释符号和该行其后的内容都会被忽视.具体内容可以参考shell的交互性这一章.该章节简单介绍了shell的交互性.

##3.2 shell命令
一个简单的命令例如:echo a b c包含了命令本身和一些由空格隔开的参数.

很多的复杂的shell命令是由简单的shell命令组合到一起儿形成的.在一个管道中一个命令的输出成为下一个命令的输入.
- [简单命令]     最常见的一些命令
- [管道]         连接命令间的输入和输出.
- [列表]         如何串行化执行命令
- [组合命令]     shell命令的控制流程
- [携程]       另一种命令之间交互的方式
- [GNU并行化]    并行运行命令的方法

###3.2.1 简单命令
简单命令是最常用的命令,它仅仅是一些用空格隔开的单词,用shell的控制字符控制的操作.通常情况下,第一个单词是要执行的命令,后面跟着的是命令的参数. 
返回值表明了一个命令的返回状态.这个状态是由POSIX规范规定的.

###3.2.2 管道
管道是一系列由|或者|&隔开的操作.
一个管道的格式是:
    command1 [[| or |&] command2]
每个命令的输出都通过一个管道来成为下个命令的输入. 这就是说,每个命令从上一个命令的输出中读取输入.
如果使用|&这个命令,标准错误流也会通过被管道输出.这比使用2>&1 |要短. 这种隐式的方法应该位于所有的重定向类型后面. 

使用保留字time可在管道完成的时候打印时间统计信息.它将会打印出执行命令时在用户态和内核态分别使用的时间.使用-p参数可以使输出格式按照POSIX规范来打印.当shell处于POSIX模式时,如果time前又"-"前缀,那么shell将并不把time作为保留字.可能需要设置ITMEFORMAT环境变量来规定时间信息的展示格式. time保留字可以方便的统计shell内置命令,shell函数,管道的时间信息.一个单独的time命令并不能很方便的获取这些信息.

当shell处于POSIX模式时,time后可能紧跟一个换行符.在这种情况下,shell将会展示出shell和子shell所使用的用户态时间和内核态时间的总时间.这时候使用TIMEFORMAT变量来限定时间显示的格式.

如果管道中的内容不是异步执行的话,shell将会等待管道中的所有命令结束之后才算完成.

在管道中的每个命令执行的时候都是在自己的子shell中执行的.管道的返回值是由管道中的最后一个命令决定的,除非pipefail这个选项被打开.在pipefail打开的情况下,管道的返回值是管道中最后一个以非0值返回的命令来决定的.如果管道由!保留字修饰的话,那么shell的返回值规则刚好和上述的相反.shell将会等待管道中所有的命令直到管道返回值可用.



### 3.2.3 命令列表
  列表是一个连续的序列，这个序列由一个或者多个由";","&","&&","||"分隔符分开的管道组成。
  在这些操作符中,"&&"和"||"拥有相同的优先级，其次是";"和"&"。
  一个列表中可能会出现一个或这更多的换行符来分隔命令，相当于一个分号。
  如果一个命令被"&"操作符终止，那么shell将会在一个子shell中异步的执行这个命令。这被称作为在后台运行命令。这个时候shell并不等待命令结束并返回返回值。当任务管理被激活的时候，一个异步命令的标准输入如果没有任何显式的重定向的话，将会被重定向到/dev/null。
  被";"分隔开的命令是串行执行的;shell将会依次等待各个命令执行完毕。整个序列的返回值是最后一个命令的返回值。
  AND和OR 列表是一个由&&或者||分隔的序列，AND和OR列表的执行具有左结合性。
  一个AND结构的列表如下：
    command1 && command2
  当且仅当command1的返回值是0的时候，command2才会执行。
  一个OR结构的列表如下：
    command1 || command2
  当且仅当command1的返回值是非0的时候，command2才会执行。
  整个AND或者OR列表的返回值是列表当中最后一个执行的命令的返回值。

### 3.2.4 复合命令
+ 循环结构： 迭代行为的shell命令
+ 条件结构： 条件的shell命令
+ 命令组：   一个构成一组命令的方法
复合命令是shell编程中的一种结构，每个结构都由一个保留字或控制字符开始，并以相应的保留字和控制字符结束。复合命令的重定向作用到命令组当中的所有命令中，除非该命令显式的声明重定向。
Bash提供了循环结构，条件结构，还有一种让命令构成命令组来执行的结构。
#### 3.2.4.1 循环结构
Bash支持如下所示的循环结构。
注意在指令中出现";"的时候，";"可能会被一个或几个换行符替换。
until
  until循环的格式是：
    until test-commands; do consequent-commands; done
  当test-commands的返回值是0的时候退出循环。整个循环的返回值是consequent-commadns最后一次迭代的返回值，如果未进入循环，返回值是0。

while
  while循环的格式是：
    while test-commands; do consequent-commands; done
  当test-commands的返回值是0的时候跳出循环，整个循环的返回值是consequent-commadn最后一次迭代的返回值，如果未进入循环，返回值是0.

for
  for循环的格式如下：
    for name [ [in [words ...] ] ; ] do commands; done
  展开命令，依次执行结果列表当中的命令。如果"in word"没有给出，那么for循环将会针对每个位置参数执行一次命令，具体内容参见特殊参数那一章。整个循环的返回值是最后一次迭代执行的命令的返回值，如果没能进入循环，返回值是0.
  for循环还支持另外一种格式，如下：
    for (( expr1 ; expr2 ; expr3 ; )) ; do commands ; done
  
#### 3.2.4.1 判断结构
#### 3.2.4.3 命令组
### 3.2.5 携程
### 3.2.6 GNU并行化

##3.3 shell函数
##3.4 shell参数
###3.4.1位置殘素
###3.4.2特殊参数






















 


























